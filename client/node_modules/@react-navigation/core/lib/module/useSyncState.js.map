{"version":3,"sources":["useSyncState.tsx"],"names":["React","UNINTIALIZED_STATE","useSyncState","initialState","stateRef","useRef","current","state","setTrackingState","useState","getState","useCallback","setState"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,MAAMC,kBAAkB,GAAG,EAA3B;AAEA,eAAe,SAASC,YAAT,CAAyBC,YAAzB,EAAuD;AACpE,QAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAgBJ,kBAAhB,CAAjB;;AAEA,MAAIG,QAAQ,CAACE,OAAT,KAAqBL,kBAAzB,EAA6C;AAC3CG,IAAAA,QAAQ,CAACE,OAAT,GACE;AACA,WAAOH,YAAP,KAAwB,UAAxB,GAAqCA,YAAY,EAAjD,GAAsDA,YAFxD;AAGD;;AAED,QAAM,CAACI,KAAD,EAAQC,gBAAR,IAA4BR,KAAK,CAACS,QAAN,CAAeL,QAAQ,CAACE,OAAxB,CAAlC;AAEA,QAAMI,QAAQ,GAAGV,KAAK,CAACW,WAAN,CAAkB,MAAMP,QAAQ,CAACE,OAAjC,EAA0C,EAA1C,CAAjB;AAEA,QAAMM,QAAQ,GAAGZ,KAAK,CAACW,WAAN,CAAmBJ,KAAD,IAAc;AAC/C,QAAIA,KAAK,KAAKH,QAAQ,CAACE,OAAvB,EAAgC;AAC9B;AACD;;AAEDF,IAAAA,QAAQ,CAACE,OAAT,GAAmBC,KAAnB;AACAC,IAAAA,gBAAgB,CAACD,KAAD,CAAhB;AACD,GAPgB,EAOd,EAPc,CAAjB;AASA,SAAO,CAACA,KAAD,EAAQG,QAAR,EAAkBE,QAAlB,CAAP;AACD","sourcesContent":["import * as React from 'react';\n\nconst UNINTIALIZED_STATE = {};\n\nexport default function useSyncState<T>(initialState?: (() => T) | T) {\n  const stateRef = React.useRef<T>(UNINTIALIZED_STATE as any);\n\n  if (stateRef.current === UNINTIALIZED_STATE) {\n    stateRef.current =\n      // @ts-ignore\n      typeof initialState === 'function' ? initialState() : initialState;\n  }\n\n  const [state, setTrackingState] = React.useState(stateRef.current);\n\n  const getState = React.useCallback(() => stateRef.current, []);\n\n  const setState = React.useCallback((state: T) => {\n    if (state === stateRef.current) {\n      return;\n    }\n\n    stateRef.current = state;\n    setTrackingState(state);\n  }, []);\n\n  return [state, getState, setState] as const;\n}\n"]}